/*!
 * Project: 'pcmall';
 * Module: 'flashsale';
 * Tag: 'pc-v4.108.0';
 * Branch: 'heads/pc-v4.108.0';
 * Last commit: '[RELEASE] pc-v4.108.0' (449fe03e2236555f6fa491df3868f5c452bcb9b9);
 * Updated: '2022-02-09T10:56:36.968Z';
 */
(self.wpJsonpPcmallFlashsale=self.wpJsonpPcmallFlashsale||[]).push([[960],{694:function(e,t,a){"use strict";var r=a(3804),s=a.n(r),l=a(6704),n=a(2361),o=a(7762),i=a(6263),c=a(7073),m=a(2807);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}t.Z=function(e){var t=s().forwardRef((function(t,a){var d=(0,r.useContext)(o.InjectReducerContext).injectAsyncReducer;return(0,i.u)((function(){d({flashSale:c.g0,sMartFlashSaleReducer:m.XY})}),[d,c.g0,m.XY]),s().createElement(n.Z,{onTrack:l.Tracking.onTrack},s().createElement(e,_({},t,{ref:a})))})),a=function(e){return e.displayName||e.name||"Component"}(t);return t.displayName="WithFlashSaleWrap("+a+")",t}},4925:function(e,t,a){"use strict";a.d(t,{Z:function(){return B}});var r=a(3804),s=a.n(r),l=a(8997),n=a.n(l),o=a(5042),i=a(6704),c=a(8523),m=a(3905),_=i.I18n.t,d=i.I18n.withI18nCollections;var u=d([c.L,c.GC])((function(e){var t=e.sold,a=e.total,s=e.soldOutTime,l=void 0===s?0:s,o=e.startTime,i=void 0===o?0:o,c=e.layout,m=100*(a-t)/a,d=Math.ceil(Math.floor(2*m)/2),u=0===a||t===a,p=u?Math.floor((l-i)/3600):null,f=u&&0===p?l-i<60?1:Math.floor((l-i)/60)%60:null;return u?r.createElement("div",{className:n()("flash-sale-sold-out","flash-sale-sold-out--"+c)},f?1===f?_("label_amount_sold_out_in_1_min",{amount:a}):_("label_amount_sold_out_in_n_mins",{minutes:f,amount:a}):p?1===p?_("label_amount_sold_out_in_1_hour",{hours:1,amount:a}):_("label_amount_sold_out_in_n_hours",{hours:p,amount:a}):null):r.createElement("div",{className:"flash-sale-progress-bar__wrapper flash-sale-progress-bar__wrapper--"+c},r.createElement("div",{className:n()("flash-sale-progress-bar","flash-sale-progress-bar--"+c)},r.createElement("div",{className:n()("flash-sale-progress-bar__text","flash-sale-progress-bar__text--"+c,{"flash-sale-progress-bar__text--selling-fast":d<=15})},d>15?_("label_n_sold_flash_sale",{count:t>0?t:0}):_("label_selling_fast")),r.createElement("div",{className:n()("flash-sale-progress-bar__complement-wrapper","flash-sale-progress-bar__complement-wrapper--"+c)},r.createElement("div",{className:n()("flash-sale-progress-bar__complement-sizer","flash-sale-progress-bar__complement-sizer--"+c),style:{width:d+"%"}},r.createElement("div",{className:"flash-sale-progress-bar__complement-color"}))),m<=50&&r.createElement("div",{className:"flash-sale-progress-bar__fire"})))})),p=a(5915),f=a(1809),h=(0,a(5035).S)((0,f.of)()),g=p.LU.bind(null,p.x5[h]),v=function(e,t){var a=new Date(1e3*t),r=new Date(1e3*e),s=(0,p.IS)("minute",a,r);return g(a,r,{totalUnits:1,endUnit:"minute",roundLast:s>60?"floor":s<1?"ceil":"round",unitLowerBounds:{year:Number.MAX_VALUE,month:Number.MAX_VALUE,week:Number.MAX_VALUE,day:Number.MAX_VALUE}})},E=a(5548),y=a(3984);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,r,s={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(s[a]=e[a]);return s}function N(e,t,a,r){return function(s){e(),s&&s.stopPropagation(),s&&s.preventDefault(),r?window.location.href=t:a.push(t)}}function k(e){var t=e.trackingClick,a=e.to,s=e.history,l=w(e,["trackingClick","to","history"]);return r.createElement("div",{onClick:N(t,a,s,"string"==typeof a&&/^http/.test(a))},l.children)}function O(e){var t=e.targetType,a=w(e,["targetType"]),s=(0,y.Z)(t,{to:a.to});return r.createElement(k,b({trackingClick:s},a))}var C=a(980),A=a(4233),x=a(8312),L=a(4251),I=a(6219),S=a(3743),T=a(4158);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=i.I18n.t,U=i.I18n.withI18nCollections,D=i.Env.getLocale(),j={IN:"hot_deals",default:"flash_sale"},F=j[D]||j.default,H=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).rootElement=null,a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,R(t,a);var l=r.prototype;return l.componentDidMount=function(){var e=this.props,t=e.item,a=e.isOngoing,r=t.flash_sale_stock,s=t.stock,l=r-s;a&&window.Sentry&&t&&l&&l<0&&window.Sentry.captureMessage("Flash Sale sold out count is negative\n        promotionid: "+t.promotionid+"\n        itemid: "+t.itemid+"\n        flash_sale_stock:"+s+"\n        stock:"+r+"\n        sold(flash_sale_stock-stock): "+l+",","error")},l.shouldComponentUpdate=function(e){return this.props.item.itemid!==e.item.itemid||this.props.item.promotionid!==e.item.promotionid},l.render=function(){var e=this,t=this.props,a=t.item,r=t.layout,l=t.overwriteCardLink,i=t.displayFlashSaleProgressBar,c=t.setShowDiscountBadge,_=t.isPlaceholder,d=t.isOngoing,p=t.toTrack,f=t.isDP,h=t.position,g=t.history,y=t.recommendation_info;if(_&&"home-page"===r)return s().createElement("div",{className:n()("flash-sale-item-card","flash-sale-item-card--home-page")},s().createElement("div",{className:n()("flash-sale-item-card__image","flash-sale-item-card__image--home-page")},s().createElement(m.p,{className:"flash-sale-item-card-placeholder__image"})),s().createElement("div",{className:n()("flash-sale-item-card__lower-wrapper","flash-sale-item-card__lower-wrapper--home-page")},s().createElement("div",{className:"skeleton-full"},s().createElement("div",{className:"center skeleton-full",style:{height:26}},s().createElement("div",{className:"skeleton skeleton-medium skeleton-line"})),s().createElement("div",{className:"center skeleton-full",style:{height:16}},s().createElement("div",{className:"skeleton skeleton-full skeleton-line"})))));var b=d,w=b&&(0===a.stock||0===a.flash_sale_stock||a.is_soldout),N=a.raw_discount,k=(0,o.Jn)(a.promo_images&&a.promo_images.length>0?a.promo_images[0]:a.image,!0),L=function(e,t){if(e){var a="TW"===__LOCALE__?(100-e.extra_discount)/10:e.extra_discount,r="";if(e.end_time&&e.start_time&&(r=v(e.start_time,e.end_time)),e&&"function"==typeof t)return r?t("fs_extra_n_off_applied_for_first_m_in_x",{n:a,m:e.extra_discount_stock,x:r}):t("fs_extra_n_off_applied_for_first_m",{n:a,m:e.extra_discount_stock})}return""}(a.extra_discount_info,M),R=r===T.HS.LANDING_PAGE||r===T.HS.MART_LANDING_PAGE,U=!!L&&R,j=a.hidden_price_display,H=!!a&&!!a.shopid&&!!a.itemid,B=l||(H?w?I.xW.getUrl({seoName:a.name,shopId:a.shopid,itemId:a.itemid,from:F,promotionid:a.promotionid}):(0,A.O)(a.shopid,a.itemid,a.name):""),G={isDP:f,toTrack:p,item:a,position:h,isOngoing:d,recommendation_info:y};return H?s().createElement("div",{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(t){e.rootElement=t,e.props.trackingRef&&e.props.trackingRef(t)})),onClick:function(){e.props.trackingClick&&e.props.trackingClick()},className:n()("flash-sale-item-card","flash-sale-item-card--"+r.replace("_","-").toLowerCase(),"flash-sale-item-card--"+__LOCALE__,{"flash-sale-item-card--sold-out":w})},s().createElement(C.Z,{className:"flash-sale-item-card-link",to:B},s().createElement("div",{className:n()("flash-sale-item-card__image","flash-sale-item-card__image--"+r)},w&&s().createElement(E.VL,null),a.promo_overlay_image&&s().createElement(m.p,{src:(0,o.Jn)(a.promo_overlay_image,!0),className:n()("flash-sale-item-card__image-overlay","flash-sale-item-card__image-overlay--"+r),imageServerWidthOperator:320}),s().createElement(m.p,{className:"flash-sale-item-card__animated-image",src:k,imageServerWidthOperator:320})),R&&s().createElement("div",{className:n()("flash-sale-item-card__item-name",!L&&"flash-sale-item-card__item-name-extra-discount")},s().createElement("div",{className:L?"flash-sale-item-card__item-name-box-extra-discount":"flash-sale-item-card__item-name-box",title:a.promo_name||a.name},a.promo_name||a.name)),U&&s().createElement("div",{className:"flash-sale-item-card__extra-discount-label"},L),(R||!d&&r===T.HS.MART_HOME_PAGE)&&a.price_before_discount!==a.price&&s().createElement("div",{className:n()("flash-sale-item-card__original-price","flash-sale-item-card__original-price--"+r)},s().createElement(S.qR,{locale:D,price:a.price_before_discount,layout:r,type:T.g8.PRICE_BEFORE_DISCOUNT})),s().createElement("div",{className:n()("flash-sale-item-card__lower-wrapper","flash-sale-item-card__lower-wrapper--"+__LOCALE__,"flash-sale-item-card__lower-wrapper--"+r,!b&&"flash-sale-item-card__lower-wrapper--"+r+"__coming-soon")},s().createElement("div",{className:"flash-sale-item-card__lower-left"},s().createElement("div",{className:n()("flash-sale-item-card__current-price","flash-sale-item-card__current-price--"+r,!b&&"flash-sale-item-card__current-price--"+r+"__coming-soon")},s().createElement(S.qR,{locale:D,price:a.price,hiddenPrice:j,layout:r,type:a.price?T.g8.CURRENT_PRICE:T.g8.HIDDEN_PRICE})),i&&s().createElement(u,{sold:a.flash_sale_stock-a.stock,total:a.flash_sale_stock,soldOutTime:a.end_time,startTime:a.start_time,layout:r})),s().createElement("div",{className:"flash-sale-item-card__lower-right"},!w&&R&&b&&s().createElement(O,P({},G,{targetType:"BuyNowButton",to:B,history:g}),s().createElement("div",{className:n()("flash-sale-item-card__buy-now-button","flash-sale-item-card__buy-now-button--"+r)},M("label_buy_now_flash_sale"))),(R||r===T.HS.MART_HOME_PAGE)&&!b&&s().createElement(O,P({},G,{targetType:"ViewDetailsButton",to:B,history:g}),s().createElement("div",{className:n()("flash-sale-item-card__view-details-button","flash-sale-item-card__view-details-button--"+r)},M("label_btn_view_details")))),c&&!!N&&d&&s().createElement("div",{className:n()("shopee-item-card__badge-wrapper","shopee-fs-item-card__badge-wrapper","shopee-fs-item-card__badge-wrapper--"+r)},s().createElement(E.OO,{rawDiscount:N,language:x.UA,key:"badge-promotion",offText:M("pr_badge_label_off")}))))):null},r}(r.Component),B=U([c.x7,c.L])((0,L.Z)(H,"FlashSaleItemCard"))},4233:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});var r=a(9373);function s(e,t,a){return a?r.Z.getUrl({seoName:a,shopId:e,itemId:t}):r.O.getUrl({shopId:e,itemId:t})}},8312:function(e,t,a){"use strict";a.d(t,{UA:function(){return l},se:function(){return o}});var r=a(1809),s=a(7143),l=(0,r.of)(),n=(0,s.pO)(__LOCALE__),o=(n.language,n.languages,n.countryName,n.currency);n.adultAge,s.H0[__LOCALE__]},8610:function(e,t,a){var r=a(6704).FetchUtils;e.exports=r}}]);